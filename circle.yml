## Customize the test machine
machine:

  timezone:
    Europe/Madrid # Set the timezone

  php:
      version: 5.4.5

## Customize checkout
checkout:
  post:
    - git submodule sync
    - git submodule update --init # use submodules

## Customize dependencies
dependencies:
  pre:
    - bower install dojo/dojo dojo/dijit dojo/dojox dojo/util
  post:
    - wget http://selenium-release.storage.googleapis.com/2.44/selenium-server-standalone-2.44.0.jar
    - java -jar selenium-server-standalone-2.44.0.jar:
            background: true

## Customize database setup
database:
  override:
    - mysql -u ubuntu circle_test < db.sql

test:
  override:
    - mkdir -p $CIRCLE_TEST_REPORTS/intern
    - | # Test Conditional expression
      [[ "B" != "B" ]] && ./node_modules/.bin/intern-runner config=tests/intern functionalSuites=tests/functional/*
    - cp ./report.xml $CIRCLE_TEST_REPORTS/intern